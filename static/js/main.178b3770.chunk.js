(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],[,,function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(54),t),i(n(14),t),i(n(11),t),i(n(24),t),i(n(55),t),i(n(56),t)},function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(25),t),i(n(15),t),i(n(16),t),i(n(57),t),i(n(58),t),i(n(59),t),i(n(60),t)},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(62);Object.defineProperty(t,"dropDownOpen",{enumerable:!0,get:function(){return o.open}}),Object.defineProperty(t,"dropDownUpdate",{enumerable:!0,get:function(){return o.update}}),Object.defineProperty(t,"dropDownSubscriptions",{enumerable:!0,get:function(){return o.subscriptions}}),Object.defineProperty(t,"ViewDropDown",{enumerable:!0,get:function(){return o.ViewDropDown}})},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dim=t.Dim=void 0;class o{constructor(e,t){this.w=e,this.h=t}}function i(e,t){return new o(e,null!==t&&void 0!==t?t:e)}t.Dim=o,o.zero=i(0),t.dim=i},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pos=t.Pos=void 0;class o{constructor(e,t){this.x=e,this.y=t}add(e){return new o(this.x+e.x,this.y+e.y)}}function i(e,t){return new o(e,t)}t.Pos=o,o.origin=i(0,0),t.pos=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.docMouseDown=t.gotItemBox=t.childMsg=t.gotKeyDown=t.gotMenuBox=t.gotUuid=t.gotWindowDimensions=t.noop=void 0,t.noop=function(){return{tag:"noop"}},t.gotWindowDimensions=function(e){return{tag:"got-window-dimensions",d:e}},t.gotUuid=function(e){return{tag:"got-uuid",uuid:e}},t.gotMenuBox=function(e){return{tag:"got-menu-box",r:e}},t.gotKeyDown=function(e){return{tag:"key-down",key:e}},t.childMsg=function(e){return{tag:"child-msg",m:e}},t.gotItemBox=function(e,t,n,o){return{tag:"got-item-box",item:e,selectFirst:o,r:t,subMenuCounter:n}},t.docMouseDown=function(){return{tag:"doc-mouse-down"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.menuItemTask=t.menuTask=t.menuItemId=t.menuId=t.separator=t.item=t.menu=t.Menu=void 0;const o=n(0);class i{constructor(e){this.elements=e}selectFirstItem(){return new i(this.elements.selectIndex(0))}selectItem(e){return new i(this.elements.select(t=>t===e))}deselectAll(){return new i(o.ListWithSelection.fromArray(this.elements.toArray()))}get elems(){return this.elements.toArray()}get selectedItem(){const e=this.elements.getSelected();return"Just"===e.type&&"item"===e.value.tag?o.just(e.value):o.nothing}isSelected(e){return this.elements.isSelected(e)}findNextItemIndex(e){const t=this.elems;for(let n=e===t.length-1?0:e+1;n<t.length;n++)if("item"===t[n].tag)return o.just(n);return o.nothing}findPreviousItemIndex(e){const t=this.elems;for(let n=0===e?t.length-1:e-1;n>=0;n--)if("item"===t[n].tag)return o.just(n);return o.nothing}moveSelection(e){return this.elements.getSelectedIndex().map(t=>(e?this.findNextItemIndex(t):this.findPreviousItemIndex(t)).map(e=>new i(this.elements.selectIndex(e))).withDefault(this)).withDefaultSupply(()=>new i(this.elements.selectIndex(e?0:this.elements.length()-1)))}indexOfItem(e){const t=this.elements.toArray().indexOf(e);return-1===t?o.nothing:o.just(t)}}function r(e){return"tm-".concat(btoa(e))}function u(e,t){return"tm-item-".concat(e,"-").concat(t)}function a(e){return o.Task.fromLambda(()=>{const t=document.getElementById(e);if(null===t)throw new Error("element not found with id:"+e);return t})}t.Menu=i,t.menu=function(e){return new i(o.ListWithSelection.fromArray(e))},t.item=function(e,t){return{tag:"item",userData:e,subMenu:o.maybeOf(t)}},t.separator={tag:"separator"},t.menuId=r,t.menuItemId=u,t.menuTask=function(e){return a(r(e))},t.menuItemTask=function(e,t){return a(u(e,t))}},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.box=t.Box=void 0;const o=n(14),i=n(11);class r{constructor(e,t){this.p=e,this.d=t}static fromDomRect(e){const t=e.x,n=e.y,r=e.height,a=e.width;return u(o.pos(t,n),i.dim(a,r))}get topLeft(){return this.p}get bottomRight(){return o.pos(this.right,this.bottom)}get left(){return this.p.x}get right(){return this.left+this.d.w}get top(){return this.p.y}get bottom(){return this.top+this.d.h}isPointInside(e){return!(e.x<this.left||e.x>this.right||e.y<this.top||e.y>this.bottom)}isBoxInside(e){return this.isPointInside(e.topLeft)&&this.isPointInside(e.bottomRight)}}function u(e,t){return new r(e,t)}t.Box=r,t.box=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keyboardNavigated=t.menuStatePlacing=t.initialModel=void 0;const o=n(0);function i(e){return{tag:"placing",refBox:e}}t.initialModel=function(e,t){return{uuid:o.nothing,windowSize:o.nothing,menu:e,state:i(t),error:o.nothing,child:o.nothing,navigatedWithKeyboard:!1,subMenuCounter:0}},t.menuStatePlacing=i,t.keyboardNavigated=function(e,t=!0){return Object.assign(Object.assign({},e),{navigatedWithKeyboard:t})}},,function(e,t,n){e.exports=n(63)},,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stopEvent=void 0,t.stopEvent=e=>{e.preventDefault(),e.stopPropagation()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.place1DStart=t.place1DEnd=t.placeCombo=t.place=void 0;const o=n(24),i=n(11),r=n(14);function u(e,t,n,o){if(t+n+o>e){if(o<t)return{offset:t-o,len:o};if(o<e){return{offset:t+n-(t+n+o-e),len:o}}return{offset:0,len:e}}return{offset:t+n,len:o}}function a(e,t,n,o){if(o>e)return{offset:0,len:e};if(t+o>e){if(o<t+n)return{offset:t+n-o,len:o};if(o<e){return{offset:t+n-(t+n+o-e),len:o}}return{offset:0,len:10}}return{offset:t,len:o}}t.place=function(e,t,n){const s=u(e.w,t.p.x,t.d.w,n.w),c=a(e.h,t.p.y,t.d.h,n.h);return o.box(r.pos(s.offset,c.offset),i.dim(s.len,c.len))},t.placeCombo=function(e,t,n){const u=a(e.w,t.p.x,t.d.w,n.w),s=function(e,t,n,o){const i=t+n,r=t,u=e-i;return o<u?{offset:i,len:o}:o<r?{offset:t-o,len:o}:r>u?{offset:0,len:r}:{offset:i,len:u}}(e.h,t.p.y,t.d.h,n.h);return o.box(r.pos(u.offset,s.offset),i.dim(u.len,s.len))},t.place1DEnd=u,t.place1DStart=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.windowDimensions=void 0;const o=n(11);t.windowDimensions=function(){return o.dim(window.innerWidth,window.innerHeight)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptions=t.update=t.open=void 0;const o=n(15),i=n(0),r=n(25),u=n(16),a=n(2),s=n(5);function c(e,t,n=!1){return[r.initialModel(n?e.selectFirstItem():e.deselectAll(),t),i.Cmd.batch([i.Task.perform(h,e=>o.gotWindowDimensions(e)),i.Task.perform(i.uuid(),e=>o.gotUuid(e))])]}function m(e){if("Nothing"===e.uuid.type)return i.noCmd(e);if("Nothing"===e.windowSize.type)return i.noCmd(e);return[e,i.Task.attempt(u.menuTask(e.uuid.value).map(e=>a.Box.fromDomRect(e.getBoundingClientRect())),e=>o.gotMenuBox(e))]}function d(e,t=i.nothing){return[e[0],e[1],t]}function l(e){return i.just({tag:"item-selected",data:e.userData})}function p(e,t,n,r,s){if(n.subMenu.isNothing())return i.noCmd(e);const c=e.subMenuCounter+1;return i.Tuple.t2n(Object.assign(Object.assign({},e),{subMenuCounter:c}),i.Task.attempt(u.menuItemTask(t,r).map(e=>a.Box.fromDomRect(e.getBoundingClientRect())),e=>o.gotItemBox(n,e,c,s)))}t.open=c,t.update=function e(t,n){switch(t.tag){case"got-window-dimensions":return d(m(Object.assign(Object.assign({},n),{windowSize:i.just(t.d)})));case"got-uuid":return d(m(Object.assign(Object.assign({},n),{uuid:i.just(t.uuid)})));case"got-menu-box":if("placing"===n.state.tag){const e=n.state;return d(i.noCmd(n.windowSize.map(o=>t.r.match(t=>Object.assign(Object.assign({},n),{state:{tag:"open",box:a.place(o,e.refBox,t.d)}}),e=>Object.assign(Object.assign({},n),{error:i.just(e)}))).withDefault(n)))}return d(i.noCmd(n));case"key-down":switch(t.key){case"Escape":return d(w(r.keyboardNavigated(n)),n.child.isNothing()?i.just({tag:"request-close"}):i.nothing);case"ArrowDown":case"ArrowUp":return b(r.keyboardNavigated(n),e=>d(i.noCmd(Object.assign(Object.assign({},e),{menu:e.menu.moveSelection("ArrowDown"===t.key)}))));case"ArrowLeft":return d(w(r.keyboardNavigated(n)));case"ArrowRight":return function(e){return b(e,e=>e.menu.selectedItem.map(t=>t.subMenu.map(()=>{if("Nothing"===e.uuid.type)return d(i.noCmd(e));const n=e.uuid.value;return d(e.menu.indexOfItem(t).map(o=>p(e,n,t,o,!0)).withDefaultSupply(()=>i.noCmd(e)))}).withDefaultSupply(()=>d(i.noCmd(e)))).withDefaultSupply(()=>d(i.noCmd(e))))}(r.keyboardNavigated(n));case"Enter":case" ":return function(e){return b(e,e=>e.menu.selectedItem.map(t=>{if("Nothing"===e.uuid.type)return d(i.noCmd(e));const n=e.uuid.value;return t.subMenu.map(()=>d(e.menu.indexOfItem(t).map(o=>p(e,n,t,o,!0)).withDefaultSupply(()=>i.noCmd(e)))).withDefaultSupply(()=>d(i.noCmd(e),l(t)))}).withDefaultSupply(()=>d(i.noCmd(e))))}(n);default:return d(i.noCmd(n))}case"mouse-move":{if(n.menu.isSelected(t.item))return d(i.noCmd(n));const e=Object.assign(Object.assign({},n),{subMenuCounter:n.subMenuCounter+1});if(n.navigatedWithKeyboard)return d(i.noCmd(r.keyboardNavigated(e,!1)));if("Nothing"===n.uuid.type)return d(i.noCmd(e));const o=n.menu.selectItem(t.item),u=n.uuid.value;return d(p(Object.assign(Object.assign({},e),{menu:o,child:i.nothing}),u,t.item,t.itemIndex,!1))}case"mouse-leave":return d(i.noCmd(n.child.isJust()?n:Object.assign(Object.assign({},n),{menu:n.menu.deselectAll()})));case"got-item-box":return t.subMenuCounter!==n.subMenuCounter?d(i.noCmd(n)):d(t.r.match(e=>{const r=Object.assign(Object.assign({},n),{menu:n.menu.selectItem(t.item)});return t.item.subMenu.map(n=>{const u=c(n,e,t.selectFirst),a=Object.assign(Object.assign({},r),{child:i.just(u[0])});return i.Tuple.t2n(a,u[1].map(o.childMsg))}).withDefaultSupply(()=>r.child.map(()=>i.noCmd(Object.assign(Object.assign({},n),{child:i.nothing}))).withDefaultSupply(()=>i.noCmd(n)))},e=>i.noCmd(Object.assign(Object.assign({},n),{error:i.just(e)}))));case"child-msg":return n.child.map(r=>{const u=e(t.m,r),a=Object.assign(Object.assign({},n),{child:i.just(u[0])});return d(i.Tuple.t2n(a,u[1].map(o.childMsg)),u[2])}).withDefaultSupply(()=>d(i.noCmd(n)));case"item-clicked":return d(i.noCmd(n),l(t.item));case"doc-mouse-down":return d(i.noCmd(n),i.just({tag:"request-close"}));case"noop":return d(i.noCmd(n))}};const f=new s.WindowEvents,g=new s.DocumentEvents;t.subscriptions=function(e){return i.Sub.batch([f.on("resize",()=>o.gotWindowDimensions(a.dim(window.innerWidth,window.innerHeight))),g.on("mousedown",e=>{if(2===e.button)return o.noop();let t=e.target;for(;t;){if(t.classList.contains("tm"))return o.noop();t=t.parentElement}return o.docMouseDown()}),"open"===e.state.tag?g.on("keydown",e=>o.gotKeyDown(e.key)):i.Sub.none()])};const h=i.Task.succeedLazy(()=>a.dim(window.innerWidth,window.innerHeight));function b(e,t){switch(e.child.type){case"Nothing":return t(e);case"Just":{const n=b(e.child.value,t);return[Object.assign(Object.assign({},e),{child:i.just(n[0])}),n[1].map(o.childMsg),n[2]]}}}function w(e){switch(e.child.type){case"Nothing":return i.noCmd(e);case"Just":{const t=e.child.value;return t.child.isJust()?i.Tuple.fromNative(w(t)).mapFirst(t=>Object.assign(Object.assign({},e),{child:i.just(t)})).mapSecond(e=>e.map(o.childMsg)).toNative():i.noCmd(Object.assign(Object.assign({},e),{child:i.nothing}))}}}},function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ViewMenuItem=t.ViewMenu=void 0;const u=r(n(1)),a=n(16),s=n(15),c=n(0),m=n(2);function d(e){const t=e.menu,n=e.item,o=e.renderer,i=e.dispatch,r=e.uuid,s=e.itemIndex,c=t.isSelected(n);return u.createElement("div",{id:a.menuItemId(r,s),onMouseMove:()=>i({tag:"mouse-move",item:n,itemIndex:s}),onMouseLeave:()=>i({tag:"mouse-leave",item:n,itemIndex:s}),onClick:()=>{i({tag:"item-clicked",item:n})}},o({data:n.userData,active:c,hasSubMenu:n.subMenu.isJust()}))}t.ViewMenu=function e(t){const n=t.model,o=t.dispatch,i=t.renderer,r=n.menu,l=n.state,p=n.uuid,f=n.windowSize;if("Nothing"===p.type)return u.createElement(u.Fragment,null);if("Nothing"===f.type)return u.createElement(u.Fragment,null);const g=()=>r.elems.map((e,n)=>{switch(e.tag){case"item":return u.createElement(d,Object.assign({key:"item-".concat(n),uuid:p.value,itemIndex:n,menu:r,item:e},t));case"separator":return u.createElement("div",{key:"sep-".concat(n),className:"tm-separator"})}});switch(l.tag){case"placing":{const e=l.refBox;return u.createElement("div",{className:"tm-placer",style:{position:"absolute",top:0,left:0,bottom:0,right:0,overflow:"hidden"},onContextMenu:m.stopEvent},u.createElement("div",{className:"tm",id:a.menuId(p.value),style:{position:"absolute",top:e.p.y,left:e.p.x,visibility:"hidden"},onContextMenu:m.stopEvent},g()))}case"open":{const t=l.box,r=t.p,d=t.d;return u.createElement(u.Fragment,null,u.createElement("div",{className:"tm",id:a.menuId(p.value),style:{position:"fixed",top:r.y,left:r.x,width:d.w,height:d.h},onContextMenu:m.stopEvent},g()),n.child.map(t=>u.createElement(e,{model:t,dispatch:c.map(o,s.childMsg),renderer:i})).withDefaultSupply(()=>u.createElement(u.Fragment,null)))}}},t.ViewMenuItem=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultItemRenderer=void 0;const u=r(n(1));t.defaultItemRenderer=function(e){return t=>{const n=t.data,o=t.active,i=t.hasSubMenu,r=o?" tm-active":"";return u.createElement("div",{className:"tm-item".concat(r)},u.createElement("div",{className:"tm-item__content"},e(n)),i?u.createElement("div",{className:"tm-item__submenu"},"\u203a"):u.createElement(u.Fragment,null))}}},function(e,t,n){},function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptions=t.update=t.ViewDropDown=t.open=void 0;const u=r(n(1)),a=n(2),s=n(0),c=n(5);function m(e){return{tag:"got-rendered-box",r:e}}function d(e){return{tag:"got-init-data",r:e}}const l={tag:"noop"},p={tag:"request-close"};function f(e){return console.error(e),g(s.noCmd({tag:"error",e:e}))}function g(e,t=!1){return[e[0],e[1],t]}t.open=function(e){const t=s.Task.succeedLazy(()=>a.windowDimensions()),n=e.andThen(e=>t.andThen(t=>s.uuid().map(n=>({refBox:e,windowDimensions:t,uuid:n}))));return[{tag:"fresh"},s.Task.attempt(n,d)]},t.ViewDropDown=function(e){const t=e.renderer,n=e.model;switch(n.tag){case"fresh":return u.createElement("div",{className:"tm-drop-down tm-placing",style:{position:"absolute",top:0,left:0,visibility:"hidden"}},t());case"error":return u.createElement(u.Fragment,null);case"ready":return n.placed.map(e=>{const o=e.p,i=e.d;return u.createElement("div",{id:n.initData.uuid,className:"tm-drop-down tm-placed",style:{position:"fixed",top:o.y,left:o.x,width:i.w,height:i.h}},t())}).withDefaultSupply(()=>u.createElement("div",{id:n.initData.uuid,className:"tm-drop-down tm-placing",style:{position:"absolute",top:0,left:0,visibility:"hidden"}},t()))}},t.update=function(e,t){switch(e.tag){case"got-init-data":return"fresh"!==t.tag?g(s.noCmd(t)):e.r.match(e=>[{tag:"ready",initData:e,placed:s.nothing},s.Task.attempt(function(e){return(t=e,s.Task.fromLambda(()=>{const e=document.getElementById(t);if(!e)throw new Error("element not found "+t);return e})).map(e=>a.Box.fromDomRect(e.getBoundingClientRect()));var t}(e.uuid),m),!1],f);case"got-rendered-box":return e.r.match(e=>{if("ready"!==t.tag)return g(s.noCmd(t));const n=t.initData,o=n.windowDimensions,i=n.refBox,r=a.placeCombo(o,i,e.d);return g(s.noCmd(Object.assign(Object.assign({},t),{placed:s.just(r)})))},f);case"request-close":return g([t,s.Cmd.none()],!0);case"noop":return g(s.noCmd(t))}};const h=new c.DocumentEvents;t.subscriptions=function(){return s.Sub.batch([h.on("keydown",e=>"Escape"===e.key?p:l),h.on("mousedown",e=>{let t=e.target;for(;t;){if(t.classList.contains("tm-drop-down"))return l;t=t.parentElement}return p})])}},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n.n(o),r=n(26),u=n.n(r),a=(n(32),n(0));const s={tag:"noop"};function c(e){return{tag:"menu-page-msg",msg:e}}function m(e){return{tag:"dd-page-msg",msg:e}}function d(e){return{tag:"placement-page-msg",msg:e}}var l=n(5);const p=new l.Router(l.route0.map(()=>"home"),Object(l.route1)(Object(l.str)("menu")).map(()=>"menu"),Object(l.route1)(Object(l.str)("dropdown")).map(()=>"dropdown"),Object(l.route1)(Object(l.str)("placement")).map(()=>"placement"));function f(e){switch(e){case"home":return"/";default:return"/"+e}}var g=n(2),h=n(3);function b(e){return{tag:"menu-msg",msg:e}}const w=Object(h.defaultItemRenderer)(e=>o.createElement("span",null,e));var j=n(4);const O=Object(h.menu)([Object(h.item)("Try"),Object(h.item)("Finally")]),v=Object(h.menu)([Object(h.item)("Do this"),Object(h.item)("Do that"),h.separator,Object(h.item)("Another sub menu...",O)]),y=Object(h.menu)([Object(h.item)("Yalla",v),h.separator,Object(h.item)("Copy"),Object(h.item)("Cut"),Object(h.item)("Paste"),h.separator,Object(h.item)("I am a bit longer")]);const D=new l.DocumentEvents;function M(e,t){return a.Tuple.fromNative(t).mapFirst(t=>Object(j.a)(Object(j.a)({},e),{},{menuModel:Object(a.just)(t)})).mapSecond(e=>e.map(b)).toNative()}function x(e,t=a.nothing){return Object(a.noCmd)(Object(j.a)(Object(j.a)({},e),{},{menuModel:a.nothing,lastClicked:t}))}n(61);var E=n(8);function C(e){return{tag:"dd-msg",msg:e}}function S(e){return{tag:"got-window-dimensions",d:e}}const _=new l.WindowEvents;function k(e){return{tag:"got-window-dimensions",d:e}}const N=new l.DocumentEvents,P=new l.WindowEvents;function I(e){return p.parseLocation(e).map(e=>{switch(e){case"home":return T();case"menu":return a.Tuple.fromNative(Object(a.noCmd)({tag:"menu",mousePos:g.Pos.origin,lastClicked:a.nothing,menuModel:a.nothing})).mapFirst(e=>({page:e})).mapSecond(e=>e.map(c)).toNative();case"dropdown":return a.Tuple.fromNative(function(){const e=a.Task.succeedLazy(()=>Object(g.windowDimensions)()),t={tag:"drop-down-page",viewportDim:a.nothing,indexAndModel:a.nothing};return a.Tuple.t2n(t,a.Task.perform(e,S))}()).mapFirst(e=>({page:e})).mapSecond(e=>e.map(m)).toNative();case"placement":return a.Tuple.fromNative(function(){const e={tag:"placement-page",viewportDim:a.nothing,mode:"menu",mousePos:g.Pos.origin},t=a.Task.perform(a.Task.succeedLazy(()=>Object(g.dim)(window.innerWidth,window.innerHeight)),k);return a.Tuple.t2n(e,t)}()).mapFirst(e=>({page:e})).mapSecond(e=>e.map(d)).toNative()}}).withDefaultSupply(()=>T())}function T(){return Object(a.noCmd)({page:{tag:"home"}})}function B(e,t,n){return o.createElement("a",{href:"#",onClick:n=>{n.preventDefault(),e(function(e){return{tag:"navigate",route:e}}(t))}},n)}function F(e,t){const n=t.page;switch(n.tag){case"home":return o.createElement(o.Fragment,null,o.createElement("h1",null,"tea-pop demo app"),o.createElement("ul",null,o.createElement("li",null,B(e,"menu","Context menu")),o.createElement("li",null,B(e,"dropdown","Drop-down")),o.createElement("li",null,B(e,"placement","Live placement"))));case"menu":return function(e,t){return o.createElement(o.Fragment,null,o.createElement("div",{className:"demo",onContextMenu:g.stopEvent,onMouseDown:t=>e({tag:"mouse-down",button:t.button})},t.menuModel.map(()=>o.createElement("span",null,"Menu is open")).withDefaultSupply(()=>t.lastClicked.map(e=>o.createElement("span",null,"You selected ",o.createElement("em",null,e))).withDefaultSupply(()=>o.createElement(o.Fragment,null,o.createElement("div",null,"Right-click anywhere, or use the ",o.createElement("code",null,"\u2263")," key."))))),t.menuModel.map(t=>o.createElement(h.ViewMenu,{model:t,dispatch:Object(a.map)(e,b),renderer:w})).withDefault(o.createElement(o.Fragment,null)))}(Object(a.map)(e,c),n);case"drop-down-page":return function(e,t){return t.viewportDim.map(n=>{const i=Math.floor(n.w/10),r=Math.floor(n.h/10),u=[];let a=1;const s=r-8,c=i-8;for(let m=0;m+4+c<n.w;m+=i)for(let i=0;i+4+s<n.h;i+=r){const n=a,r=i+4,d=m+4,l=t.indexAndModel.map(e=>e.a).filter(e=>e===n).map(()=>"lightblue").withDefault("lightgray");u.push(o.createElement("button",{key:"btn"+a,style:{position:"absolute",top:r,left:d,height:s,width:c,border:"none",backgroundColor:l},onClick:t=>e({tag:"button-clicked",index:n,b:g.Box.fromDomRect(t.target.getBoundingClientRect())})},a)),a++}return o.createElement(o.Fragment,null,o.createElement("div",{className:"drop-down-page"},u),t.indexAndModel.map(e=>o.createElement(E.ViewDropDown,{renderer:()=>o.createElement("div",{className:"my-drop-down"},"HELLO"),model:e.b})).withDefaultSupply(()=>o.createElement(o.Fragment,null)))}).withDefaultSupply(()=>o.createElement(o.Fragment,null))}(Object(a.map)(e,m),n);case"placement-page":return function(e,t){return t.viewportDim.map(e=>{let n="menu"===t.mode?g.place:g.placeCombo;const i=t.mousePos,r=Object(g.dim)(600,400),u=Object(g.dim)(100,50),a=n(e,Object(g.box)(Object(g.pos)(i.x,i.y),u),r),s=e=>o.createElement("span",null,e.w,"*",e.h),c=e=>o.createElement("span",null,e.x,":",e.y);return o.createElement("div",{className:"demo"},o.createElement("div",{className:"dimensions"},o.createElement("ul",null,o.createElement("li",null,"mode: ",t.mode," (toggle with ",o.createElement("code",null,"M"),")"),o.createElement("li",null,"elem: ",s(r)),o.createElement("li",null,"viewport: ",s(e)),o.createElement("li",null,"ref: ",s(u)),o.createElement("li",null,"mousePos: ",c(i)),o.createElement("li",null,"placed: ",c(a.p),", ",s(a.d)))),o.createElement("div",{className:"ref-elem",style:{height:u.h,width:u.w,left:t.mousePos.x,top:t.mousePos.y}}),o.createElement("div",{className:"menu-elem",style:{height:a.d.h,width:a.d.w,left:a.p.x,top:a.p.y}}))}).withDefaultSupply(()=>o.createElement(o.Fragment,null))}(Object(a.map)(e,d),n)}}function A(e,t){switch(e.tag){case"url-change":return I(e.l);case"menu-page-msg":{const n=t.page;return"menu"!==n.tag?Object(a.noCmd)(t):a.Tuple.fromNative(function(e,t){switch(e.tag){case"menu-msg":return console.log("menu-msg",e.msg),t.menuModel.map(n=>{const o=Object(h.update)(e.msg,n),i=Object(j.a)(Object(j.a)({},t),{},{menuModel:Object(a.just)(o[0])}),r=o[1].map(b);return o[2].map(e=>{switch(e.tag){case"request-close":{const e=x(i);return a.Tuple.fromNative(e).mapSecond(e=>a.Cmd.batch([r,e])).toNative()}case"item-selected":{const t=x(i,Object(a.just)(e.data));return a.Tuple.fromNative(t).mapSecond(e=>a.Cmd.batch([r,e])).toNative()}}}).withDefaultSupply(()=>a.Tuple.t2n(i,r))}).withDefaultSupply(()=>Object(a.noCmd)(t));case"mouse-down":return console.log("down",t.mousePos),2===e.button?M(t,Object(h.open)(y,Object(g.box)(t.mousePos,g.Dim.zero))):Object(a.noCmd)(t);case"mouse-move":return console.log("move",e.pos),Object(a.noCmd)(Object(j.a)(Object(j.a)({},t),{},{mousePos:e.pos}));case"key-down":return"ContextMenu"===e.key?M(t,Object(h.open)(y,Object(g.box)(t.mousePos,g.Dim.zero))):Object(a.noCmd)(t)}}(e.msg,n)).mapFirst(e=>({page:e})).mapSecond(e=>e.map(c)).toNative()}case"dd-page-msg":{const n=t.page;return"drop-down-page"!==n.tag?Object(a.noCmd)(t):a.Tuple.fromNative(function(e,t){switch(e.tag){case"button-clicked":{const n=Object(E.dropDownOpen)(a.Task.succeed(e.b)),o=Object(j.a)(Object(j.a)({},t),{},{indexAndModel:Object(a.just)(new a.Tuple(e.index,n[0]))});return a.Tuple.t2n(o,n[1].map(C))}case"dd-msg":return t.indexAndModel.map(n=>{const o=Object(E.dropDownUpdate)(e.msg,n.b);if(o[2]){const e=Object(j.a)(Object(j.a)({},t),{},{indexAndModel:a.nothing});return Object(a.noCmd)(e)}return a.Tuple.fromNative([o[0],o[1]]).mapFirst(e=>Object(j.a)(Object(j.a)({},t),{},{indexAndModel:t.indexAndModel.map(t=>new a.Tuple(t.a,e))})).mapSecond(e=>e.map(C)).toNative()}).withDefaultSupply(()=>Object(a.noCmd)(t));case"got-window-dimensions":return Object(a.noCmd)(Object(j.a)(Object(j.a)({},t),{},{viewportDim:Object(a.just)(e.d)}))}}(e.msg,n)).mapFirst(e=>({page:e})).mapSecond(e=>e.map(m)).toNative()}case"placement-page-msg":{const n=t.page;return"placement-page"!==n.tag?Object(a.noCmd)(t):a.Tuple.fromNative(function(e,t){switch(e.tag){case"got-window-dimensions":return Object(a.noCmd)(Object(j.a)(Object(j.a)({},t),{},{viewportDim:Object(a.just)(e.d)}));case"key-down":return Object(a.noCmd)("m"===e.key?Object(j.a)(Object(j.a)({},t),{},{mode:"menu"===t.mode?"drop-down":"menu"}):t);case"mouse-move":return Object(a.noCmd)(Object(j.a)(Object(j.a)({},t),{},{mousePos:e.pos}))}}(e.msg,n)).mapFirst(e=>({page:e})).mapSecond(e=>e.map(d)).toNative()}case"navigate":return a.Tuple.t2n(t,a.Task.perform(Object(l.newUrl)(f(e.route)),()=>s));case"noop":return Object(a.noCmd)(t)}}function W(e){const t=e.page;switch(t.tag){case"menu":return function(e){const t=e.menuModel.map(e=>Object(h.subscriptions)(e).map(b)).withDefaultSupply(()=>a.Sub.none()),n=D.on("mousemove",e=>({tag:"mouse-move",pos:Object(g.pos)(e.pageX,e.pageY)})),o=D.on("keydown",e=>({tag:"key-down",key:e.key}));return a.Sub.batch([t,n,o])}(t).map(c);case"drop-down-page":return a.Sub.batch([Object(E.dropDownSubscriptions)().map(C),_.on("resize",()=>S(Object(g.dim)(window.innerWidth,window.innerHeight)))]).map(m);case"placement-page":return function(){const e=N.on("mousemove",e=>({tag:"mouse-move",pos:Object(g.pos)(e.pageX,e.pageY)})),t=N.on("keydown",e=>({tag:"key-down",key:e.key}));return a.Sub.batch([e,t,P.on("resize",e=>k(Object(g.dim)(window.innerWidth,window.innerHeight)))])}().map(d)}return a.Sub.none()}function L(e){return{tag:"url-change",l:e}}const R=()=>o.createElement(l.ProgramWithNav,{onUrlChange:L,init:I,view:F,update:A,subscriptions:W,devTools:l.DevTools.init(window)});u.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(R,null)),document.getElementById("root"))}],[[27,1,2]]]);
//# sourceMappingURL=main.178b3770.chunk.js.map